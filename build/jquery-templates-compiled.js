(function(){var k={"&":"&amp;","<":"&lt;",">":"&gt;"};function l(b){return k[b]||(k[b]="&#"+b.charCodeAt(0)+";")}var o={"\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r","/":"\\/","\\":"\\\\"};function p(b){var c;var a;if(!(a=o[b])){a=b.charCodeAt(0).toString(16);var d=a.length<=2?"\\x00":"\\u0000";c=o[b]=d.substring(0,d.length-a.length)+a,a=c}return a}var q=/[\0"&'<>]/g,r=/[\0\b-\r"&'/<->\\\x85\u2028\u2029]/g;$.encode=function(b){return b===void 0?"":String(b).replace(q,l)};var s=1,w=0,x=RegExp("(?:[^${]|\\{(?!\\{/?[=a-z])|\\$(?!\\{))+|\\$\\{[^}]*\\}|\\{\\{(?:(?:=|[a-z][a-z0-9]*)[\\s\\S]*?|/(?:=|[a-z][a-z0-9]*)\\s*)\\}\\}","gi"),y=/^\s*(?:\(\s*([$_a-z]\w*)\s*(?:,\s*([$_a-z]\w*)\s*)?\)\s*)?(\S(?:[\S\s]*\S)?)\s*$/i,z=/^\s*(?:\(([\S\s]*)\)\s*)?([^\s()](?:[^()]*[^\s()])?)\s*$/,A="$index",B="$value",C="templates",D="tmpl",E={each:s,"if":s,wrap:s};function F(b){var a={};b.replace(x,function(b){(b=b.match(/^\{\{\/(=|[a-z][^\W_]*)[\S\s]*}}$/i))&&(a[b[1]]=s)});return a}
function G(b,a){var d=["",""],f=[d],c=d,m=0;$.each(b.replace(/\{#[\S\s]*?#}/g,"").replace(/\{\{!?|}}|(?:[^{}]|\{(?!\{)|}(?!}))+/g,function(a){return a==="{{!"?(++m,""):m?(a==="}}"?--m:a==="{{"&&++m,""):a}).match(x)||[],function(b,d){var h=d.match(/^\{\{(\/?)(=|[a-z][^\W_]*)([\S\s]*)}}$/i);if(h)if(h[1])c=f[--f.length-1];else{var j=[h[2],h[3]];c.push(j);a[h[2]]===s&&f.push(c=j)}else d.substring(0,2)==="${"?c.push(["=",d.substring(2,d.length-1)]):c.push(d)});return d};function H(b){var a=["var $$tmplVar0;$data=$.extend(Object.create?Object.create(null):{},$data||{});$item=$item||{};with($data){return("],d=[],f,c=0;$.each(b.slice(2),function n(b,h){f&&a.push("+");var j;if(typeof h==="string")a.push("'"+String(h).replace(r,p)+"'");else{var i=h[0],e=h[1];j=h.length;var g="$$tmplVar"+c;if(i==="="){f||a.push("''+");var t="",u="",e=e.replace(/(=>[\w$.]+)+$/,function(a){a=a.split("=>");u=Array(a.length).join(")");t=a.reverse().join("(");return""});a.push("(",g,"=(",e,
"),",t,"'function'!==typeof ",g,"?",g,":",g,".call(null,arguments))",u)}else if(i==="if"){g=2;for(e=f=s;e;g=i+1){i=j;for(e=g;e<i;++e)h[e][0]==="else"&&(i=e);var v=g<j?(g===2?h:h[g-1])[1]:"",e=/\S/.test(v);a.push(f?"":"''",g===2?"((":"):(",v,e?")?(":"");f=w;$.each(h.slice(g,i),n)}a.push(f?"))":"''))")}else i==="each"?(j=e.match(y),i=j[1]||A,e=j[2]||B,j=j[3],++c,a.push("(",g,"=[],$.each((",j,"),function(",i,",",e,"){var ","$$tmplVar",c,";",g,".push("),f=w,d.push(i+":"+i,e+":"+e),$.each(h.slice(2),n),
d.length-=2,f||a.push("''"),a.push(")}),",g,".join(''))"),--c):i==="tmpl"&&(j=e.match(z),i=j[1],a.push("(",g,"=",i?"$.extend([],arguments,["+i+"])":d.length?"[$.extend({},$data,{"+d+"}),$item]":"arguments",",$.template((",j[2],")).tmpl(",g,"[0],",g,"[1]))"))}f=s});a.push(f?")}":"'')}");return Function("$data","$item",a.join(""))};$.templatePlugins=[function(b){$.each(b,function d(b,c){typeof c!=="string"&&(c[0]==="="?c[1]+="=>$.encode":c[0]==="html"?c[0]="=":$.each(c,d))});return b}];function I(b){return(b=$[C][b])&&"function"!==typeof b[D]}
function J(b,a){function d(a){return function(b){var c;for(c=0;c<a;++c)b=$.templatePlugins[c](b,d(c));return b}}var f={};$.each(b,function n(a,c){f[a]!==s&&(f[a]=s,$.each(c,function(a,c){if(c[0]==="tmpl"||c[0]==="wrap"){var e=c[1].match(z);e&&(e=e[2],I(e)&&f[e]!==s&&n(e,b[e]=$[C][e]))}}))});var c;$.each(d($.templatePlugins.length)(b),function(b,d){var f={tmpl:H(d)};b!==a?$[C][b]=f:c=f});return c}$[C]={};
$.template=function K(a,d){var f=$[C],c;if(arguments.length===1){if(a.indexOf("<")+1)return K(null,a);I(a)&&(c={},c[a]=f[a],J(c));return f[a]}c=G(d,$.extend(F(d),E));if(a===null)return J({_:c},"_");f[a]=c}}())
