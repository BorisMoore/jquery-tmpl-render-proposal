(function(){var m=/(?=\${[^}]*}|{{(?:[=a-z][^\W_]*[\S\s]*?|\/[=a-z][^\W_]*\s*)}})/gi,n=/^{{(\/?)(=|[a-z][^\W_]*)([\S\s]*)}}/i,r=/^\s*(?:\(\s*([$_a-z]\w*)\s*(?:,\s*([$_a-z]\w*)\s*)?\)\s*)?(\S(?:[\S\s]*\S)?)\s*$/i,s=/^\s*(?:\(([\S\s]*)\)\s*)?([^\s()](?:[^()]*[^\s()])?)\s*$/,t={each:1,"if":1,wrap:1};function u(c){var d={};$.each(c.split(m),function(c,e){var a;if(a=e.match(/^{{\/([a-z][^\W_]*)[\S\s]*}}/i))d[a[1]]=1});return d}
function v(c,d){var b=["",""],e=[b],a=b,k=0;$.each(c.replace(/{#[\S\s]*?#}/g,"").replace(/{{!?|}}|(?:[^{}]|{(?!{)|}(?!}))+/g,function(a){return a==="{{!"?(++k,""):k?(a==="}}"?--k:a==="{{"&&++k,""):a}).split(m),function(c,b){var f=b.match(n);if(f){if(f[1])a=e[--e.length-1];else{var j=[f[2],f[3]];a.push(j);d[f[2]]===1&&e.push(a=j)}b=b.substring(f[0].length)}else b.substring(0,2)==="${"&&(f=b.indexOf("}"),a.push(["=",b.substring(2,f)]),b=b.substring(f+1));b&&a.push(b)});return b};$.extAll=function(c,d){var b=arguments,e,a,k;for(e=1;e<b.length;++e)for(k in a=b[e])c[k]=a[k];return c};
function w(c){var d=0,b=["var $$tmplVar0;$item=$item||{};with($data=$.extAll(Object.create?Object.create(null):{},$data||{})){return("],e=[],a;$.each(c.slice(2),function l(c,f){a&&b.push("+");var j;if("string"===typeof f)b.push("'"+String(f).replace(x,y)+"'");else{var i=f[0],g=f[1];j=f.length;var h="$$tmplVar"+d;if(i==="="){a||b.push("''+");var o="",p="",g=g.replace(/(=>[\w$.[\]]+)+$/,function(a){a=a.split("=>");p=Array(a.length).join(")");o=a.reverse().join("(");return""});b.push("(",h,"=(",g,"),",
o,"'function'!==typeof ",h,"?",h,":",h,".call(null,arguments))",p)}else if(i==="if"){h=2;for(g=a=1;g;h=i+1){i=j;for(g=h;g<i;++g)f[g][0]==="else"&&(i=g);var q=h<j?(h===2?f:f[h-1])[1]:"",g=/\S/.test(q);b.push(a?"":"''",h===2?"((":"):(",q,g?")?(":"");a=0;$.each(f.slice(h,i),l)}b.push(a?"))":"''))")}else i==="each"?(j=g.match(r),i=j[1]||"$index",g=j[2]||"$value",j=j[3],++d,b.push("(",h,"=[],$.each((",j,"),function(",i,",",g,"){var ","$$tmplVar",d,";",h,".push("),a=0,e.push(i+":"+i,g+":"+g),$.each(f.slice(2),
l),e.length-=2,a||b.push("''"),b.push(")}),",h,".join(''))"),--d):i==="tmpl"&&(j=g.match(s),i=j[1],b.push("(",h,"=",i?"$.extend([],arguments,["+i+"])":e.length?"[$.extAll({},$data,{"+e+"}),$item]":"arguments",",$.template((",j[2],")).tmpl(",h,"[0],",h,"[1]))"))}a=1});b.push(a?")}":"'')}");return Function("$data","$item",b.join(""))};$.templatePlugins=[];function z(c){return(c=$.templates[c])&&"function"!==typeof c.tmpl}
function A(c,d){function b(a){return function(c){var d;for(d=0;d<a;++d)c=$.templatePlugins[d](c,b(d));return c}}var e={};$.each(c,function l(a,b){e[a]!==1&&(e[a]=1,$.each(b,function(a,b){if(b[0]==="tmpl"||b[0]==="wrap"){var d=b[1].match(s);d&&(d=Function("return "+d[2])(),z(d)&&e[d]!==1&&l(d,c[d]=$.templates[d]))}}))});var a;$.each(b($.templatePlugins.length)(c),function(b,c){var e={tmpl:w(c)};b!==d?$.templates[b]=e:a=e});return a}$.templates={};
$.template=function B(d,b){var e=$.templates,a;if(arguments.length===1){if(d.indexOf("<")+1)return B(null,d);z(d)&&(a={},a[d]=e[d],A(a));return e[d]}a=v(b,$.extend(u(b),t));if(d===null)return A({_:a},"_");e[d]=a};var C={"&":"&amp;","<":"&lt;",">":"&gt;"};function D(c){return C[c]||(C[c]="&#"+c.charCodeAt(0)+";")}var E={"\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r","/":"\\/","\\":"\\\\"};function y(c){var d;return E[c]||(d=c.charCodeAt(0).toString(16),E[c]="\\u0000".substring(0,6-d.length)+d)}var F=/[\0"&'<>]/g,x=/[\0\b-\r"&'/<->\\\x85\u2028\u2029]/g;function G(c){return c===void 0?"":String(c).replace(F,D)}$.encode=G;$.templatePlugins.push(function(c){$.each(c,function b(c,a){"string"!==typeof a&&(a[0]==="="?a[1]+="=>$.encode":a[0]==="html"?a[0]="=":$.each(a,b))});return c})}())
