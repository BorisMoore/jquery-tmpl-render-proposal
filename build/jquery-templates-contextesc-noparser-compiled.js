(function(){function c(){}c.prototype.toString=function(){return this.content};function f(){function a(a){this.content=a}var b=a.prototype=new c;b.constructor=a;b.contentKind=0;return a}var g=f(),h=f(),i=f();SanitizedHtml=g;SanitizedJsStrChars=h;SanitizedUri=i;function j(a){return a&&a.contentKind===0?a:a instanceof Array?a.map(j).join(""):a===void 0?"":String(a).replace(k,l)}function m(a){return a&&a.contentKind===1?a.content:String(a).replace(n,o)}var p=/['-)]/g;
function q(a){return"%"+a.charCodeAt(0).toString(16)}function r(a){a=String(a);if(/[\0- "<>\\{}\x7f\x85\xa0\u2028\u2029\uff00-\uffff]|%(?![\da-f]{2})/i.test(a)){for(var a=a.split(/(%[\da-f]{2}|[#$&+,/:;=?@[\]])/i),b=a.length-1;b>=0;b-=2)a[b]=encodeURIComponent(a[b]);a=a.join("")}return a.replace(p,q)}var s={'"':"&quot;","&":"&amp;","<":"&lt;",">":"&gt;"};function l(a){return s[a]||(s[a]="&#"+a.charCodeAt(0)+";")}var t={"\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r","/":"\\/","\\":"\\\\"};
function o(a){var e;var b;if(!(b=t[a])){b=a.charCodeAt(0).toString(16);var d=b.length<=2?"\\x00":"\\u0000";e=t[a]=d.substring(0,d.length-b.length)+b,b=e}return b}var v={};function w(a){return v[a]||(v[a]="\\"+a.charCodeAt(0).toString(16)+" ")}
var k=/[\0"&'<>]/g,x=/[\0"'<>]/g,y=/[\0\t-\r "&'/<->`\x85\xa0\u2028\u2029-]/g,z=/[\0\t-\r "'/<->`\x85\xa0\u2028\u2029-]/g,n=/[\0\b-\r"&'/<->\\\x85\u2028\u2029]/g,A=/[\0\b-\r"$&-/:<-?[-^{-}\x85\u2028\u2029]/g,B=/[\0\b-\r"&-*/:->@\\{}\x85\xa0\u2028\u2029]/g,C=/^(?!-*(?:expression|(?:moz-)?binding))(?:[#.]?-?\w[\w-]*(?:-[_a-z][\w-]*)*-?|-?(?:\d+(?:\.\d*)?|\.\d)(?:[a-z]{1,2}|%)?|!important|)$/i,D=/^(?:(?:https?|mailto):|[^#&/:?]*(?:[#/?]|$))/i,E=/^(?!style|on|action|archive|background|cite|classid|codebase|data|dsync|href|longdesc|src|usemap)(?:[\w$:-]*|dir=(?:ltr|rtl))$/i,
F=/^(?!script|style|title|textarea|xmp|no)[\w$:-]*$/i,G=/<(?:!|\/?[a-z])(?:[^"'>]|"[^"]*"|'[^']*')*>/gi,H=[];H[0]=j;H[1]=function(a){return a&&a.contentKind===0?String(a.content).replace(x,l):String(a).replace(k,l)};H[2]=function(a){a&&a.contentKind===0?(a=String(a.content).replace(G,""),a=String(a).replace(x,l)):a=String(a).replace(k,l);return a};H[3]=function(a){a&&a.contentKind===0?(a=String(a.content).replace(G,""),a=String(a).replace(z,l)):a=String(a).replace(y,l);return a};
H[4]=function(a){a=String(a);return!F.test(a)?"zSafehtmlz":a};H[5]=function(a){var a=String(a),a=!E.test(a)?"zSafehtmlz":a,b,d=a.indexOf("=");return d>=0&&(b=a.charAt(a.length-1))!='"'&&b!="'"?a.substring(0,d+1)+'"'+a.substring(d+1)+'"':a};H[6]=m;H[7]=function(a){var b;return a==null?" null ":(b=typeof a)=="boolean"||b=="number"?" "+a+" ":"'"+m(a)+"'"};H[8]=function(a){return String(a).replace(A,o)};H[9]=function(a){return String(a).replace(B,w)};
H[10]=function(a){a==null?a="":(a=String(a),a=!C.test(a)?"zSafehtmlz":a);return a};H[11]=function(a){return a&&a.contentKind===2?r(a):encodeURIComponent(a).replace(p,q)};H[12]=r;H[13]=function(a){return D.test(String(a))?r(a):"#zSafehtmlz"};j[0]=$.encode=$.extend(j,H);$.extAll=function(a){var b=arguments,d,u,e;for(d=1;d<b.length;++d)for(e in u=b[d])a[e]=u[e];return a};$.templatePlugins=[function(a){$.each(a,function d(a,e){typeof e!=="string"&&(e[0]==="="?e[1]+="=>$.encode":e[0]==="html"?e[0]="=":$.each(e,d))});return a}];$.templates={};$.template=function(a){return $.templates[a]}}())
